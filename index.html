<html lang="fr">
<head>
  <link rel="stylesheet" href="style3.css" class="rel">
  <meta charset="UTF-8">
  <title>TD1-Addresse IP</title>
  
</head>
<body>
	
	<div id= imag>
	  
		<img src="subnet3.png" alt="subnet"id= "img">
	</div>
	<div id= titre> <h2>Décodage d'adresse </h2>
	
	<form id="myform">

		<p> <label for ="myIP">AdresseIP</label>
			<input type="text" name="adresseIP" id="myIP" required minlength="9" maxlength="18">
		</p>
		
		
			
		
		<button  type="button" onclick="calcIP()">Confirmer</button>
		<!-- <button  type="button" onclick="getRandomInt()">Aléatoire</button> -->

 
		<!-- <input type="Submit" value="Aléatoire"> -->
		 <input type="reset" value="Annuler">
		
	</form>
	
	<div id= cont>
		<div id= demRes>
			<p>Masque: </p>
			<br>
			<p>Adresse réseaux : </p>
			<br>
			
			<p>Première adresse : </p>
			<br>
			<p>Broadcast : </p>
			<br>
			<p>Dernière adresse : </p>
			<br>
			<p>Nombre d'adresse : </p>
		
		</div>
		
		
			<div id="mask"><p><br></p></div>
			
			<div id="adrN"><p><br></p></div>
			
			<div id="First"><p><br></p></div>
			
			<div id="Broadcast"><p><br></p></div>
		
			<div id="Last"><p><br></p></div>
			
			<div id="Nb"><p><br></p></div>
		</div>
	
	</div>
	<div id= pied></div>
<!-- --- -->

<script>
	<!-- var nbr1= entieraleatoire(0,255); -->
	<!-- var nbr2= entieraleatoire(0,255); -->
	<!-- var nbr3= entieraleatoire(0,255); -->
	<!-- var nbr4= entieraleatoire(0,255); -->
	<!-- var CIDRal= entieraleatoire(0,32); -->
function calcIP() {
	
	

	console.log("calcIP");

	var elem = document.getElementById("myIP").value;
	//console.log(elem);
	var ip = elem.split('.');

	//console.log(ip);
	var cidr = ip[3].split('/');

	ip[3]= cidr[0];
	var CIDR=cidr[1];
	console.log(ip);

	var IP = parseInt(ip[0]) << 24 |parseInt(ip[1]) << 16 |parseInt(ip[2]) << 8 |parseInt(ip[3]); 

	var mask = 0xFFFFFFFF << (32-CIDR);
	toString(mask);
	document.getElementById("mask").innerHTML =toString(mask);
	console.log(mask);
	
	var adrN = IP & mask
	toString(adrN);
	document.getElementById("adrN").innerHTML =toString(adrN);
	console.log(adrN);
	
	
	var adrFirst = adrN +1;
	toString(adrFirst);
	document.getElementById("First").innerHTML =toString(adrFirst);
	console.log(adrFirst);


	var adrDiff = adrN | ~mask;
	toString(adrDiff);
	document.getElementById("Broadcast").innerHTML =toString(adrDiff);
	console.log(adrDiff);

	var adrLast = adrDiff -1;
	toString(adrLast);
	document.getElementById("Last").innerHTML =toString(adrLast);
	console.log(adrLast);

	var nb = Math.pow(2, (32-CIDR))-2;
	document.getElementById("Nb").innerHTML =nb;
	console.log(nb);
}
		myForm.addEventListener('reset', function(e){ 
	  });
	 
function toString(data) {
	var str = (data >> 24 &0xFF).toString()+"."+
 (data >> 16 & 0xFF ).toString()+"." + (data >> 8 & 0xFF ).toString()+"." + (data & 0xFF).toString();
 
	console.log(str);
	return str;
	}
	<!-- function random(MIN,MAX) -->
	<!-- { -->
	<!-- console.log("aléatoire"); -->
	<!-- toString(nbr1); -->
	<!-- toString(nbr2); -->
	<!-- toString(nbr3); -->
	<!-- toString(nbr4); -->
	
	<!-- var IPal = nbr1+"."+nbr2+"." + nbr3+"."+nbr4; -->
	<!-- var ipal = elem.split('.'); -->
	<!-- elem=document.getElementById("IPal").value; -->
	<!-- var CIDRal = ipal[3].split('/'); -->
	<!-- console.log(IPal); -->
	<!-- console.log(CIDRal); -->
	
	
	<!-- return Math.floor(Math.random()*(MAX-MIN+1))+ MIN; -->


	
	
	</script>
</body>

</html>
